import java.io.*;

aspect MipsInterpreter {
    
    public String Program.interpret() {
        // Pretty print code
        String code = print().getString();
        
        try {
	        Spim interpreter = new Spim(code);
	        
	        boolean success = interpreter.parse();
	        if(!success) {
	            return interpreter.getParseError();
	        }
	        
	        return interpreter.interpret();
	    } catch (IOException e) {
	       return e.getMessage();
	    }
    }
}